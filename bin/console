#!/usr/bin/env php
<?php
error_reporting(E_ALL);
date_default_timezone_set('America/Chicago');

use Pimple\Container as Dic;
use Symfony\Component\Console\Application;

require __DIR__ . '/../vendor/autoload.php';

class App extends Application
{
  private $dic;

  public function getDefaultCommands()
  {
    $commands = parent::getDefaultCommands();

    $this->dic = $dic = new Dic();

    new \Cerad\Component\Arbiter\Services($dic);

    foreach($dic->keys() as $serviceId) {
      if (substr($serviceId,-8) === '_command') {
        $commands[] = $dic[$serviceId];
      }
    }
    return $commands;
  }
}
$app = new App();

$app->run();
